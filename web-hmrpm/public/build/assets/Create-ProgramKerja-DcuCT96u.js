import{u as P,r as h,j as e,H as S,L as f,X as _}from"./app-BDE2AaDe.js";import{A as F}from"./AdminLayout-DRLIiVFN.js";import{S as L,I as D}from"./ImageCropper-uI6iYpD8.js";import{A as I}from"./arrow-left-blQlcDK1.js";import{U}from"./upload-CSZiJDLr.js";import{S as R}from"./save-bM1Gya_5.js";import"./users-BV1tXCkV.js";import"./file-text-BipYlanU.js";import"./graduation-cap-DAsRhiDT.js";import"./index-C0R1yrz4.js";import"./chevron-right-q_Th7CUI.js";import"./chevron-left-Db9v-oEa.js";import"./chevron-down-Dtr0tCQU.js";import"./Toast-wOax5C-Q.js";function z({divisions:d,selectedDivisionId:j}){const{data:o,setData:r,post:v,processing:g,errors:a}=P({division_id:j||"",title:"",event_date:"",description:"",status:"Progress",documentation:[]}),[n,c]=h.useState([]),[m,u]=h.useState(null),[b,p]=h.useState(null),N=s=>{const t=Array.from(s.target.files);r("documentation",t);const l=t.map(i=>({name:i.name,url:URL.createObjectURL(i),type:i.type}));c(l)},y=s=>{const t=o.documentation.filter((i,x)=>x!==s);r("documentation",t);const l=n.filter((i,x)=>x!==s);c(l)},w=s=>{const t=n[s];t.type.startsWith("image/")&&(u(s),p(t.url))},k=s=>{const t=[...o.documentation];t[m]=s,r("documentation",t);const l=[...n];l[m]={...l[m],url:URL.createObjectURL(s)},c(l),u(null),p(null)},C=s=>{s.preventDefault(),v("/admin/program-kerja",{forceFormData:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(S,{title:"Tambah Program Kerja"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f,{href:"/admin/program-kerja",className:"p-2 hover:bg-muted rounded-lg transition-colors",children:e.jsx(I,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-foreground",children:"Tambah Program Kerja"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Buat program kerja baru untuk divisi"})]})]}),e.jsx("form",{onSubmit:C,className:"max-w-3xl space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-border p-6 space-y-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Informasi Program Kerja"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Divisi"}),e.jsxs("select",{value:o.division_id,onChange:s=>r("division_id",s.target.value),className:"w-full px-4 py-2.5 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20",children:[e.jsx("option",{value:"",children:"Pilih Divisi"}),d.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),a.division_id&&e.jsx("p",{className:"text-red-600 text-sm",children:a.division_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Judul Program"}),e.jsx("input",{type:"text",value:o.title,onChange:s=>r("title",s.target.value),className:"w-full px-4 py-2.5 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20",placeholder:"Contoh: Upgrading Staff"}),a.title&&e.jsx("p",{className:"text-red-600 text-sm",children:a.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Tanggal Kegiatan"}),e.jsx("input",{type:"date",value:o.event_date,onChange:s=>r("event_date",s.target.value),className:"w-full px-4 py-2.5 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20"}),a.event_date&&e.jsx("p",{className:"text-red-600 text-sm",children:a.event_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Status Program"}),e.jsxs("select",{value:o.status,onChange:s=>r("status",s.target.value),className:"w-full px-4 py-2.5 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20",children:[e.jsx("option",{value:"Perencanaan",children:"Perencanaan"}),e.jsx("option",{value:"Progress",children:"Progress"}),e.jsx("option",{value:"Selesai",children:"Selesai"})]}),a.status&&e.jsx("p",{className:"text-red-600 text-sm",children:a.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Deskripsi Kegiatan"}),e.jsx("textarea",{value:o.description,onChange:s=>r("description",s.target.value),rows:5,className:"w-full px-4 py-2.5 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20",placeholder:"Tuliskan detail kegiatan, tujuan, dan hasil yang dicapai..."}),a.description&&e.jsx("p",{className:"text-red-600 text-sm",children:a.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Dokumentasi (Foto/Video)"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:N,className:"hidden",id:"documentation-upload"}),e.jsxs("label",{htmlFor:"documentation-upload",className:"flex flex-col items-center justify-center gap-2 w-full p-8 border-2 border-dashed border-border rounded-2xl cursor-pointer hover:bg-muted/30 transition-colors",children:[e.jsx(U,{size:24,className:"text-muted-foreground"}),e.jsx("span",{className:"text-sm font-bold text-muted-foreground",children:"Pilih file atau tarik kesini"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"JPG, PNG, MP4 (Maks. 20MB per file)"})]}),a.documentation&&e.jsx("p",{className:"text-red-600 text-sm",children:a.documentation}),n.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 mt-4",children:n.map((s,t)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"aspect-video rounded-lg overflow-hidden border border-border",children:s.type.startsWith("video/")?e.jsx("video",{src:s.url,className:"w-full h-full object-cover"}):e.jsx("img",{src:s.url,className:"w-full h-full object-cover",alt:s.name})}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[!s.type.startsWith("video/")&&e.jsx("button",{type:"button",onClick:()=>w(t),className:"p-1.5 bg-brand-red text-white rounded-full hover:bg-brand-red/90 transition-colors shadow-lg",title:"Potong Gambar",children:e.jsx(L,{size:12})}),e.jsx("button",{type:"button",onClick:()=>y(t),className:"p-1.5 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors shadow-lg",children:e.jsx(_,{size:12})})]})]},t))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(f,{href:"/admin/program-kerja",className:"flex-1 px-4 py-3 bg-muted hover:bg-muted/80 rounded-xl font-bold text-center transition-colors",children:"Batal"}),e.jsxs("button",{type:"submit",disabled:g,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-brand-red hover:bg-brand-red/90 text-white rounded-xl font-bold shadow-lg shadow-brand-red/20 transition-all disabled:opacity-50",children:[e.jsx(R,{size:20}),g?"Menyimpan...":"Simpan"]})]})]})})]}),b&&e.jsx(D,{image:b,onCropComplete:k,onCancel:()=>{u(null),p(null)},aspectRatio:16/9})]})}z.layout=d=>e.jsx(F,{children:d});export{z as default};
