import{u as C,r as i,j as e,H as _,L as D}from"./app-Dr-qe37l.js";import{A as S}from"./AdminLayout-BjJPFavO.js";import{S as U,I as L}from"./ImageCropper-B6fEoiIK.js";import{A as R}from"./arrow-left-TmFETYi6.js";import{C as P}from"./chevron-down-B_zxC0gj.js";import{U as c}from"./upload-TG1143yt.js";import{S as F}from"./save-BTgP8imT.js";import"./users-Bjgq_9_M.js";import"./file-text-DdEopQ7c.js";import"./graduation-cap-BC1a482v.js";import"./index-Bm14vWMG.js";import"./chevron-right-CwKZBFzI.js";import"./chevron-left-nwOPkPhN.js";import"./Toast-CM92iiXC.js";function z({periods:o,selectedPeriodId:p}){const{data:r,setData:t,post:x,processing:m,errors:a}=C({period_id:p||(o.length>0?o[0].id:""),name:"",short_desc:"",description:"",color:"#dc2626",icon_image:null,image:null}),[h,l]=i.useState(!1),[g,b]=i.useState(null),[f,u]=i.useState(null),[j,v]=i.useState(0);i.useEffect(()=>{if(!r.image){u(null);return}const s=URL.createObjectURL(r.image);return u(s),()=>URL.revokeObjectURL(s)},[r.image]);const N=s=>{const n=s.target.files[0];if(n){t("image",n);const d=new FileReader;d.onload=()=>{b(d.result),v(k=>k+1)},d.readAsDataURL(n)}},w=s=>{t("image",s),l(!1)},y=s=>{s.preventDefault(),x("/admin/divisions",{forceFormData:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(_,{title:"Tambah Divisi"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(D,{href:`/admin/divisions?period_id=${r.period_id}`,className:"p-2 hover:bg-muted rounded-lg transition-colors",children:e.jsx(R,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-foreground",children:"Tambah Divisi"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Buat divisi baru untuk periode kepengurusan"})]})]})}),e.jsxs("form",{onSubmit:y,className:"max-w-7xl grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-border p-6 space-y-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Informasi Divisi"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Periode Kepengurusan"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:r.period_id,onChange:s=>t("period_id",s.target.value),className:"w-full appearance-none px-4 py-2.5 bg-white border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 pr-10",children:[e.jsx("option",{value:"",children:"Pilih Periode"}),o.map(s=>e.jsx("option",{value:s.id,children:s.year},s.id))]}),e.jsx(P,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none",size:16})]}),a.period_id&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:a.period_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Nama Divisi"}),e.jsx("input",{type:"text",value:r.name,onChange:s=>t("name",s.target.value),className:"w-full px-4 py-2.5 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20",placeholder:"Contoh: Divisi PSDM"}),a.name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:a.name})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Nama Lengkap Departemen"}),e.jsx("input",{type:"text",value:r.short_desc,onChange:s=>t("short_desc",s.target.value),className:"w-full px-4 py-2.5 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20",placeholder:"Penjelasan singkat fokus divisi"}),a.short_desc&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:a.short_desc})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Deskripsi Lengkap"}),e.jsx("textarea",{value:r.description,onChange:s=>t("description",s.target.value),rows:5,className:"w-full px-4 py-2.5 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20",placeholder:"Tuliskan tujuan, program kerja, atau detail lain dari divisi ini..."}),a.description&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:a.description})]})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-border p-6 space-y-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Media & Gaya"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground",children:"Icon Divisi (Transparent PNG)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>t("icon_image",s.target.files[0]),className:"hidden",id:"icon-upload"}),e.jsx("label",{htmlFor:"icon-upload",className:"flex flex-col items-center justify-center gap-2 w-32 mx-auto aspect-square border-2 border-dashed border-border rounded-2xl cursor-pointer hover:bg-muted/30 transition-colors group overflow-hidden",children:r.icon_image?e.jsx("img",{src:URL.createObjectURL(r.icon_image),className:"w-full h-full object-contain p-4",alt:"Preview"}):e.jsxs(e.Fragment,{children:[e.jsx(c,{size:24,className:"text-muted-foreground group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"text-xs font-bold text-muted-foreground",children:"Upload Icon"})]})}),a.icon_image&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:a.icon_image})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground",children:"Background Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"hidden",id:"image-upload"}),e.jsx("div",{className:"relative group overflow-hidden rounded-2xl border-2 border-dashed border-border aspect-video bg-muted/5",children:r.image?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:f,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",alt:"Preview"}),e.jsxs("div",{className:"absolute top-3 right-3 flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>l(!0),className:"p-2 bg-brand-red text-white backdrop-blur-md rounded-xl transition-all shadow-xl hover:bg-brand-red/90 hover:scale-110 active:scale-95 group/btn",title:"Potong Gambar",children:e.jsx(U,{size:16,className:"group-hover/btn:rotate-12 transition-transform"})}),e.jsx("label",{htmlFor:"image-upload",className:"p-2 bg-white/20 hover:bg-white/30 backdrop-blur-md rounded-xl text-white transition-all cursor-pointer border border-white/20 shadow-xl group/upload",title:"Ganti Gambar",children:e.jsx(c,{size:16,className:"group-hover/upload:rotate-12 transition-transform"})})]})]}):e.jsxs("label",{htmlFor:"image-upload",className:"flex flex-col items-center justify-center gap-2 w-full h-full cursor-pointer hover:bg-muted/30 transition-colors group",children:[e.jsx(c,{size:24,className:"text-muted-foreground group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"text-xs font-bold text-muted-foreground uppercase tracking-widest font-black",children:"Upload Background"})]})}),e.jsx("p",{className:"text-[10px] text-muted-foreground font-medium italic",children:"* Rasio ideal 16:9 untuk tampilan bg di website."}),e.jsx("p",{className:"text-[10px] text-muted-foreground font-medium italic",children:"Untuk crop ulang gambar yang sudah disimpan, silakan upload ulang background terlebih dahulu."}),a.image&&e.jsx("p",{className:"text-red-600 text-sm mt-1 font-bold",children:a.image})]})]}),e.jsxs("button",{type:"submit",disabled:m,className:"w-full flex items-center justify-center gap-2 px-6 py-2.5 bg-brand-red hover:bg-brand-red/90 text-white rounded-xl font-bold text-sm transition-all disabled:opacity-50 shadow-md shadow-red-200",children:[e.jsx(F,{size:18}),m?"Menyimpan...":"Tambah Divisi"]})]})})]}),h&&e.jsx(L,{image:g,aspectRatio:16/9,onCropComplete:w,onCancel:()=>{l(!1)}},`cropper-${j}`)]})]})}z.layout=o=>e.jsx(S,{children:o});export{z as default};
