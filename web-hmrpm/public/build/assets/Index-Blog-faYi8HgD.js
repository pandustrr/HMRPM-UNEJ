import{c as X,d as J,r,u as Q,j as e,H as W,L as P,e as x,X as Z,b as L}from"./app-BDE2AaDe.js";import{A as ee}from"./AdminLayout-DRLIiVFN.js";import{C}from"./ConfirmModal-D_98LIp5.js";import{P as D,S as M}from"./square-pen-UgTrjlaW.js";import{T as E}from"./tag-D-IxZG61.js";import{T as z}from"./trash-2-CTb1tNdp.js";import{F as te}from"./file-text-BipYlanU.js";import{C as se}from"./calendar-0lxNvKh2.js";import{S as ae}from"./save-bM1Gya_5.js";import"./users-BV1tXCkV.js";import"./graduation-cap-DAsRhiDT.js";import"./index-C0R1yrz4.js";import"./chevron-right-q_Th7CUI.js";import"./chevron-left-Db9v-oEa.js";import"./chevron-down-Dtr0tCQU.js";import"./Toast-wOax5C-Q.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ne=X("external-link",re);function le({blogs:l,blogTypes:d}){const{url:de}=J(),[n,g]=r.useState(()=>{const t=new URLSearchParams(window.location.search);return t.get("tab")||(t.has("types")?"blogs":"types")}),[H,m]=r.useState(!1),[i,f]=r.useState(null),[a,p]=r.useState([]),j=t=>{const s=t.toString(),V=s?`${window.location.pathname}?${s}`:window.location.pathname;window.history.replaceState({},"",V)},w=t=>{g(t);const s=new URLSearchParams(window.location.search);s.set("tab",t),j(s)};r.useEffect(()=>{const s=new URLSearchParams(window.location.search).get("types");s&&p(s.split(",").map(Number))},[]),r.useEffect(()=>{const t=new URLSearchParams(window.location.search);a.length>0?(t.set("types",a.join(",")),n!=="blogs"&&(g("blogs"),t.set("tab","blogs"))):t.delete("types"),j(t)},[a]);const[U,o]=r.useState(!1),[u,y]=r.useState(null),[$,h]=r.useState(!1),[c,N]=r.useState(null),{data:O,setData:k,post:I,put:R,processing:v,reset:b,errors:T}=Q({name:""}),_=t=>{p(s=>s.includes(t)?[]:[t])},S=a.length>0?l.filter(t=>a.includes(t.blog_type_id)):l,B=(t=null)=>{t?(y(t),k("name",t.name)):(y(null),b()),o(!0)},F=t=>{t.preventDefault(),u?R(`/admin/blog-types/${u.id}`,{onSuccess:()=>{o(!1),b()}}):I("/admin/blog-types",{onSuccess:()=>{o(!1),b()}})},G=t=>{N(t),h(!0)},q=()=>{L.delete(`/admin/blog-types/${c.id}`,{onSuccess:()=>{h(!1),N(null)}})},K=t=>{f(t),m(!0)},A=()=>{const t=new URLSearchParams;return a.length>0&&t.set("types",a.join(",")),n&&t.set("tab",n),t.toString()?`?${t.toString()}`:""},Y=()=>{L.delete(`/admin/blog/${i.id}`,{onSuccess:()=>{m(!1),f(null)}})};return e.jsxs(e.Fragment,{children:[e.jsx(W,{title:"Kelola Blog"}),e.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-black text-foreground uppercase tracking-tighter",children:"KELOLA BLOG"}),e.jsx("p",{className:"text-muted-foreground text-xs font-medium",children:"Manajemen kategori dan artikel blog HMRPM."})]}),n==="types"?e.jsxs("button",{onClick:()=>B(),className:"flex items-center gap-2 bg-brand-red text-white px-4 py-2.5 rounded-xl font-bold hover:bg-brand-red/90 transition-all shadow-lg shadow-brand-red/20",children:[e.jsx(D,{size:18}),"Tambah Tipe"]}):e.jsxs(P,{href:`/admin/blog/create${A()}`,className:"flex items-center gap-2 bg-brand-red text-white px-4 py-2.5 rounded-xl font-bold hover:bg-brand-red/90 transition-all shadow-lg shadow-brand-red/20",children:[e.jsx(D,{size:18}),"Tambah Blog"]})]}),e.jsxs("div",{className:"flex p-1 gap-1 bg-muted/30 rounded-2xl w-fit border border-border mx-auto",children:[e.jsx("button",{onClick:()=>w("types"),className:x("px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all",n==="types"?"bg-white shadow-sm text-brand-red":"text-muted-foreground hover:bg-muted"),children:"TIPE BLOG"}),e.jsx("button",{onClick:()=>w("blogs"),className:x("px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all",n==="blogs"?"bg-white shadow-sm text-brand-red":"text-muted-foreground hover:bg-muted"),children:"DAFTAR BLOG"})]}),n==="types"?e.jsx("div",{className:"max-w-2xl mx-auto bg-white rounded-3xl border border-border shadow-sm overflow-hidden animate-in fade-in duration-300",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted/50 border-b border-border",children:[e.jsx("th",{className:"px-6 py-4 text-xs font-black uppercase tracking-widest",children:"Tipe Blog"}),e.jsx("th",{className:"px-6 py-4 text-xs font-black uppercase tracking-widest text-right",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:d.length>0?d.map(t=>e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-brand-red/10 rounded-lg text-brand-red group-hover:scale-110 transition-transform",children:e.jsx(E,{size:16})}),e.jsx("span",{className:"font-bold text-sm",children:t.name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 text-right",children:[e.jsx("button",{onClick:()=>B(t),className:"p-2 flex items-center justify-center bg-blue-50 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Edit",children:e.jsx(M,{size:16})}),e.jsx("button",{onClick:()=>G(t),className:"p-2 flex items-center justify-center bg-red-50 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Hapus",children:e.jsx(z,{size:16})})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"2",className:"px-6 py-12 text-center text-muted-foreground italic",children:"Belum ada tipe blog yang ditambahkan."})})})]})}):e.jsxs("div",{className:"bg-white rounded-3xl border border-border shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-5 border-b border-border bg-muted/30",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-muted-foreground",children:"Filter Tipe Blog"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>p([]),className:x("px-4 py-2 rounded-full text-xs font-black uppercase tracking-widest transition-all border",a.length===0?"bg-brand-red text-white border-brand-red shadow-md shadow-brand-red/30":"bg-white text-foreground border-border hover:border-brand-red/50 hover:bg-muted/50"),children:"Semua"}),d.length>0?d.map(t=>e.jsx("button",{onClick:()=>_(t.id),className:x("px-4 py-2 rounded-full text-xs font-black uppercase tracking-widest transition-all border",a.includes(t.id)?"bg-brand-red text-white border-brand-red shadow-md shadow-brand-red/30":"bg-white text-foreground border-border hover:border-brand-red/50 hover:bg-muted/50"),children:t.name},t.id)):e.jsx("p",{className:"text-[10px] text-muted-foreground italic",children:"Belum ada tipe blog"})]})]})}),e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted/50 border-b border-border",children:[e.jsx("th",{className:"px-6 py-4 text-xs font-black uppercase tracking-widest",children:"Konten"}),e.jsx("th",{className:"px-6 py-4 text-xs font-black uppercase tracking-widest",children:"Tipe & Tanggal"}),e.jsx("th",{className:"px-6 py-4 text-xs font-black uppercase tracking-widest",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-xs font-black uppercase tracking-widest text-right",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:S.length>0?S.map(t=>{var s;return e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-12 rounded-lg overflow-hidden bg-muted shrink-0 border border-border",children:t.image?e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground",children:e.jsx(te,{size:20})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-bold text-sm text-foreground line-clamp-1 group-hover:text-brand-red transition-colors",children:t.title}),e.jsx("p",{className:"text-[10px] text-muted-foreground font-medium line-clamp-1",children:t.excerpt})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-brand-red/10 text-brand-red rounded-md w-fit",children:[e.jsx(E,{size:10}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider",children:(s=t.blog_type)==null?void 0:s.name})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[e.jsx(se,{size:12}),e.jsx("span",{className:"text-xs font-medium",children:new Date(t.date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})})]})]})}),e.jsx("td",{className:"px-6 py-4",children:t.is_published?e.jsx("span",{className:"px-2.5 py-1 bg-green-100 text-green-700 rounded-full text-[10px] font-black uppercase tracking-wider",children:"Terbit"}):e.jsx("span",{className:"px-2.5 py-1 bg-amber-100 text-amber-700 rounded-full text-[10px] font-black uppercase tracking-wider",children:"Draft"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 text-right",children:[e.jsx("a",{href:`/blog/${t.slug}`,target:"_blank",className:"p-2 flex items-center justify-center bg-slate-50 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Lihat Publik",children:e.jsx(ne,{size:16})}),e.jsx(P,{href:`/admin/blog/${t.id}/edit${A()}`,className:"p-2 flex items-center justify-center bg-blue-50 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Edit",children:e.jsx(M,{size:16})}),e.jsx("button",{onClick:()=>K(t),className:"p-2 flex items-center justify-center bg-red-50 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Hapus",children:e.jsx(z,{size:16})})]})})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-12 text-center text-muted-foreground italic",children:a.length>0?"Tidak ada postingan blog dengan tipe yang dipilih.":"Belum ada postingan blog."})})})]})]})]}),U&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl animate-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-black tracking-tighter uppercase",children:u?"EDIT TIPE BLOG":"TAMBAH TIPE BLOG"}),e.jsx("button",{onClick:()=>o(!1),className:"text-muted-foreground hover:text-foreground p-1",children:e.jsx(Z,{size:20})})]}),e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 px-1",children:"Nama Tipe Blog"}),e.jsx("input",{type:"text",value:O.name,onChange:t=>k("name",t.target.value),placeholder:"Masukkan nama tipe...",className:"w-full px-4 py-3 bg-muted border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all font-medium",autoFocus:!0}),T.name&&e.jsx("p",{className:"text-brand-red text-[10px] font-bold mt-1",children:T.name})]}),e.jsxs("button",{type:"submit",disabled:v,className:"w-full flex items-center justify-center gap-2 bg-slate-900 hover:bg-brand-red text-white py-4 rounded-xl font-black transition-all shadow-xl hover:shadow-brand-red/20 uppercase tracking-widest",children:[e.jsx(ae,{size:18}),v?"MENYIMPAN...":"SIMPAN PERUBAHAN"]})]})]})}),e.jsx(C,{isOpen:H,title:"HAPUS BLOG?",message:`Tindakan ini tidak dapat dibatalkan. Menghapus "${i==null?void 0:i.title}" akan menghilangkan data selamanya.`,onConfirm:Y,onCancel:()=>m(!1),confirmText:"YA, HAPUS",cancelText:"BATAL"}),e.jsx(C,{isOpen:$,title:"HAPUS TIPE BLOG?",message:`Tindakan ini tidak dapat dibatalkan. Blog yang menggunakan tipe "${c==null?void 0:c.name}" mungkin terpengaruh.`,onConfirm:q,onCancel:()=>h(!1),confirmText:"YA, HAPUS",cancelText:"BATAL"})]})}le.layout=l=>e.jsx(ee,{children:l});export{le as default};
