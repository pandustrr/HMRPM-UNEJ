import{d as v,u as w,r as x,j as e,H as N,L as y,e as u,X as k}from"./app-BDE2AaDe.js";import{A as _}from"./AdminLayout-DRLIiVFN.js";import{C,a as L}from"./ckeditor-C2tDo3IB.js";import{A as S}from"./arrow-left-blQlcDK1.js";import{T}from"./tag-D-IxZG61.js";import{C as z}from"./calendar-0lxNvKh2.js";import{U as m}from"./upload-CSZiJDLr.js";import{S as P}from"./save-bM1Gya_5.js";import"./users-BV1tXCkV.js";import"./file-text-BipYlanU.js";import"./graduation-cap-DAsRhiDT.js";import"./index-C0R1yrz4.js";import"./chevron-right-q_Th7CUI.js";import"./chevron-left-Db9v-oEa.js";import"./chevron-down-Dtr0tCQU.js";import"./Toast-wOax5C-Q.js";function A({blogTypes:i}){const{url:R}=v(),{data:a,setData:r,post:b,processing:o,errors:s}=w({blog_type_id:"",title:"",slug:"",date:new Date().toISOString().split("T")[0],image:null,content:"",excerpt:"",excerpt:"",is_published:!0,_query_params:""}),[d,c]=x.useState(null);x.useEffect(()=>{const l=new URLSearchParams(window.location.search).get("types");if(r(n=>({...n,_query_params:window.location.search})),l){const n=parseInt(l.split(",")[0]);isNaN(n)||r(j=>({...j,blog_type_id:n.toString(),_query_params:window.location.search}))}},[]);const p=t=>t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_]+/g,"-").replace(/^-+|-+$/g,""),g=t=>{const l=t.target.value;r("title",l),(!a.slug||a.slug===p(a.title))&&r("slug",p(l))},h=t=>{const l=t.target.files[0];l&&(r("image",l),c(URL.createObjectURL(l)))},f=t=>{t.preventDefault(),b("/admin/blog")};return e.jsxs(e.Fragment,{children:[e.jsx(N,{title:"Buat Blog Baru"}),e.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(y,{href:`/admin/blog${window.location.search}`,className:"p-2 bg-white border border-border rounded-xl hover:bg-muted transition-colors",children:e.jsx(S,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-black text-foreground uppercase tracking-tighter",children:"BUAT BLOG BARU"}),e.jsx("p",{className:"text-muted-foreground text-xs font-medium",children:"Tulis artikel atau berita terbaru untuk HMRPM."})]})]})}),e.jsxs("form",{onSubmit:f,className:"grid grid-cols-1 lg:grid-cols-3 gap-6 text-foreground",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-border shadow-sm space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 px-1",children:"Judul Artikel"}),e.jsx("input",{type:"text",value:a.title,onChange:g,placeholder:"Masukkan judul blog...",className:"w-full px-4 py-3 bg-muted border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all font-bold text-lg"}),s.title&&e.jsx("p",{className:"text-brand-red text-[10px] font-bold mt-1",children:s.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 px-1",children:"URL Slug"}),e.jsx("input",{type:"text",value:a.slug,onChange:t=>r("slug",t.target.value),placeholder:"Otomatis dihasilkan dari judul...",className:"w-full px-4 py-3 bg-muted border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all font-medium text-sm"}),s.slug&&e.jsx("p",{className:"text-brand-red text-[10px] font-bold mt-1",children:s.slug})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 px-1",children:"Isi Konten"}),e.jsxs("div",{className:"prose-sm ck-content max-w-none",children:[e.jsx("style",{children:`
                                        .ck-editor__editable {
                                            min-height: 400px;
                                            border-bottom-left-radius: 12px !important;
                                            border-bottom-right-radius: 12px !important;
                                        }
                                        .ck-editor {
                                            width: 100% !important;
                                        }
                                    `}),e.jsx(C,{editor:L,data:a.content,onChange:(t,l)=>{const n=l.getData();r("content",n)},config:{placeholder:"Tunjukkan kreativitasmu di sini...",toolbar:["heading","|","bold","italic","link","bulletedList","numberedList","blockQuote","|","undo","redo"]}})]}),s.content&&e.jsx("p",{className:"text-brand-red text-[10px] font-bold mt-1",children:s.content})]}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 px-1",children:"Ringkasan (Opsional)"}),e.jsx("textarea",{value:a.excerpt,onChange:t=>r("excerpt",t.target.value),placeholder:"Ringkasan singkat yang muncul di daftar blog...",rows:"3",className:"w-full px-4 py-3 bg-muted border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all font-medium text-sm resize-none"}),s.excerpt&&e.jsx("p",{className:"text-brand-red text-[10px] font-bold mt-1",children:s.excerpt})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-border shadow-sm space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 px-1 flex items-center gap-2",children:[e.jsx(T,{size:12})," Tipe Blog"]}),e.jsxs("select",{value:a.blog_type_id,onChange:t=>r("blog_type_id",t.target.value),className:"w-full px-4 py-3 bg-muted border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all font-bold text-sm",children:[e.jsx("option",{value:"",children:"Pilih Tipe"}),i.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),s.blog_type_id&&e.jsx("p",{className:"text-brand-red text-[10px] font-bold mt-1",children:s.blog_type_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 px-1 flex items-center gap-2",children:[e.jsx(z,{size:12})," Tanggal Terbit"]}),e.jsx("input",{type:"date",value:a.date,onChange:t=>r("date",t.target.value),className:"w-full px-4 py-3 bg-muted border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all font-bold text-sm"}),s.date&&e.jsx("p",{className:"text-brand-red text-[10px] font-bold mt-1",children:s.date})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-2xl border border-border",children:[e.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-slate-600",children:"Terbitkan Langsung?"}),e.jsx("button",{type:"button",onClick:()=>r("is_published",!a.is_published),className:u("relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none",a.is_published?"bg-brand-red":"bg-slate-300"),children:e.jsx("span",{className:u("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",a.is_published?"translate-x-6":"translate-x-1")})})]})]}),e.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-border shadow-sm space-y-6",children:[e.jsxs("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 px-1 flex items-center gap-2",children:[e.jsx(m,{size:12})," Gambar Sampul"]}),e.jsx("div",{className:"relative group",children:d?e.jsxs("div",{className:"relative aspect-video rounded-2xl overflow-hidden border-2 border-brand-red/20 shadow-xl group",children:[e.jsx("img",{src:d,alt:"Preview",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("button",{type:"button",onClick:()=>{c(null),r("image",null)},className:"p-2 bg-white/20 backdrop-blur-md rounded-full text-white hover:bg-brand-red transition-colors",children:e.jsx(k,{size:20})})})]}):e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",onChange:h,accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),e.jsxs("div",{className:"aspect-video bg-muted border-2 border-dashed border-border rounded-2xl flex flex-col items-center justify-center gap-3 group-hover:border-brand-red/50 transition-colors",children:[e.jsx("div",{className:"p-3 bg-white rounded-xl shadow-sm group-hover:scale-110 transition-transform",children:e.jsx(m,{className:"text-brand-red",size:24})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Pilih Gambar Sampul"})]})]})}),s.image&&e.jsx("p",{className:"text-brand-red text-[10px] font-bold mt-1",children:s.image})]}),e.jsx("button",{type:"submit",disabled:o,className:"w-full flex items-center justify-center gap-2 bg-slate-900 hover:bg-brand-red text-white py-3.5 rounded-2xl font-black transition-all shadow-xl hover:shadow-brand-red/30 uppercase tracking-widest overflow-hidden group relative",children:e.jsxs("span",{className:"relative z-10 flex items-center gap-2 leading-none",children:[e.jsx(P,{size:20}),o?"MENYIMPAN...":"SIMPAN BLOG"]})})]})]})]})]})}A.layout=i=>e.jsx(_,{children:i});export{A as default};
