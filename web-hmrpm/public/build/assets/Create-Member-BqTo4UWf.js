import{u as I,r as n,j as e,H as M,L as A,M as f,I as E}from"./app-Dr-qe37l.js";import{A as $}from"./AdminLayout-BjJPFavO.js";import{S as B,I as O}from"./ImageCropper-B6fEoiIK.js";import{A as T}from"./arrow-left-TmFETYi6.js";import{U as v}from"./user-DIu9pAXj.js";import{C as j}from"./chevron-down-B_zxC0gj.js";import{U as u}from"./upload-TG1143yt.js";import{V as N}from"./video-DXHq9M6-.js";import{S as V}from"./save-BTgP8imT.js";import"./users-Bjgq_9_M.js";import"./file-text-DdEopQ7c.js";import"./graduation-cap-BC1a482v.js";import"./index-Bm14vWMG.js";import"./chevron-right-CwKZBFzI.js";import"./chevron-left-nwOPkPhN.js";import"./Toast-CM92iiXC.js";function H({periods:d,prefill:o,filter_division_id:w}){var g,b;const y=(o==null?void 0:o.period_id)||((g=d.find(r=>r.is_active))==null?void 0:g.id)||((b=d[0])==null?void 0:b.id)||"",{data:s,setData:t,post:_,processing:x,errors:a}=I({division_id:(o==null?void 0:o.division_id)||new URLSearchParams(window.location.search).get("member_division_id")||"",period_id:y,filter_division_id:w||new URLSearchParams(window.location.search).get("filter_division_id")||"",division_id_source:new URLSearchParams(window.location.search).get("division_id_source")||"",name:"",role:"",prodi:"",angkatan:"",photo:null,video:null,instagram:"",email:""}),[C,p]=n.useState([]),[k,l]=n.useState(!1),[S,D]=n.useState(null),[c,h]=n.useState(null),[P,U]=n.useState(0);n.useEffect(()=>{if(!s.photo){h(null);return}const r=URL.createObjectURL(s.photo);return h(r),()=>URL.revokeObjectURL(r)},[s.photo]),n.useEffect(()=>{const r=d.find(i=>i.id===parseInt(s.period_id));p(r?r.divisions||[]:[])},[s.period_id,d]);const z=r=>{r.preventDefault(),_("/admin/members",{forceFormData:!0})},L=r=>{const i=r.target.files[0];if(i){t("photo",i);const m=new FileReader;m.onload=()=>{D(m.result),U(F=>F+1)},m.readAsDataURL(i)}},R=r=>{t("photo",r),l(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Tambah Pengurus"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(A,{href:s.division_id_source?`/admin/divisions/${s.division_id_source}/edit`:`/admin/divisions?period_id=${s.period_id}&show_all_members=1&member_division_id=${s.filter_division_id}`,className:"p-2 hover:bg-muted rounded-lg transition-colors",children:e.jsx(T,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-foreground",children:"Tambah Pengurus"}),o!=null&&o.period_year&&(o!=null&&o.division_name)?e.jsxs("p",{className:"text-brand-red font-bold mt-1",children:[o.period_year," ",e.jsx("span",{className:"text-muted-foreground/30 mx-2",children:"Â·"})," Divisi ",o.division_name]}):e.jsx("p",{className:"text-muted-foreground mt-1",children:"Tambahkan anggota pengurus baru ke divisi"})]})]}),e.jsxs("form",{onSubmit:z,className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-border p-6 ml-1 space-y-6 shadow-sm",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(v,{size:20,className:"text-brand-red"}),"Informasi Pribadi"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-foreground",children:"Nama Lengkap"}),e.jsx("input",{type:"text",value:s.name,onChange:r=>t("name",r.target.value),className:"w-full px-4 py-2.5 bg-muted/30 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all",placeholder:"Contoh: Budi Santoso"}),a.name&&e.jsx("p",{className:"text-red-600 text-xs font-medium",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-foreground",children:"Role / Jabatan"}),e.jsx("input",{type:"text",value:s.role,onChange:r=>t("role",r.target.value),className:"w-full px-4 py-2.5 bg-muted/30 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all",placeholder:"Contoh: Ketua Divisi"}),a.role&&e.jsx("p",{className:"text-red-600 text-xs font-medium",children:a.role})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-foreground",children:"Program Studi"}),e.jsx("input",{type:"text",value:s.prodi,onChange:r=>t("prodi",r.target.value),className:"w-full px-4 py-2.5 bg-muted/30 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all",placeholder:"Contoh: Teknik Informatika"}),a.prodi&&e.jsx("p",{className:"text-red-600 text-xs font-medium",children:a.prodi})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-foreground",children:"Angkatan"}),e.jsx("input",{type:"text",value:s.angkatan,onChange:r=>t("angkatan",r.target.value),className:"w-full px-4 py-2.5 bg-muted/30 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all",placeholder:"Contoh: 2022"}),a.angkatan&&e.jsx("p",{className:"text-red-600 text-xs font-medium",children:a.angkatan})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-border p-6 shadow-sm space-y-6",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(f,{size:20,className:"text-brand-red"}),"Hubungan & Media Sosial"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-bold text-foreground flex items-center gap-2",children:[e.jsx(E,{size:14})," Instagram URL"]}),e.jsx("input",{type:"url",value:s.instagram,onChange:r=>t("instagram",r.target.value),className:"w-full px-4 py-2.5 bg-muted/30 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all",placeholder:"https://instagram.com/..."})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs("label",{className:"text-sm font-bold text-foreground flex items-center gap-2",children:[e.jsx(f,{size:14})," Email Address"]}),e.jsx("input",{type:"email",value:s.email,onChange:r=>t("email",r.target.value),className:"w-full px-4 py-2.5 bg-muted/30 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all",placeholder:"email@example.com"})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-border p-6 shadow-sm space-y-4",children:[e.jsx("h2",{className:"font-bold text-foreground",children:"Organisasi"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Periode"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:s.period_id,onChange:r=>{t("period_id",r.target.value),t("division_id","")},className:"w-full appearance-none bg-muted/30 border border-border rounded-xl px-4 py-2.5 pr-10 font-bold text-sm focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all",children:d.map(r=>e.jsx("option",{value:r.id,children:r.year},r.id))}),e.jsx(j,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none",size:16})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Divisi"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:s.division_id,onChange:r=>t("division_id",r.target.value),className:"w-full appearance-none bg-muted/30 border border-border rounded-xl px-4 py-2.5 pr-10 font-bold text-sm focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all",children:[e.jsx("option",{value:"",children:"Pilih Divisi"}),C.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),e.jsx(j,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none",size:16})]}),a.division_id&&e.jsx("p",{className:"text-red-600 text-xs font-medium",children:a.division_id})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-border p-4 shadow-sm space-y-4",children:[e.jsx("h2",{className:"font-bold text-foreground",children:"Media"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(v,{size:12})," Foto Profil (Max 2MB)"]}),e.jsx("div",{className:`group relative h-64 w-full max-w-[160px] mx-auto rounded-3xl overflow-hidden transition-all ${c?"bg-card border border-border shadow-md":"bg-muted/5 border-2 border-dashed border-border hover:border-brand-red/50"}`,children:c?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:c,alt:"Preview",className:"absolute inset-0 w-full h-full object-cover transition-transform duration-500",onError:r=>r.target.src="/storage/logo/hmrpm.png"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[s.photo&&e.jsx("button",{type:"button",onClick:()=>l(!0),className:"p-1.5 bg-brand-red text-white backdrop-blur-md rounded-lg transition-all shadow-xl hover:bg-brand-red/90 hover:scale-110 active:scale-95 group/btn",title:"Potong Gambar",children:e.jsx(B,{size:14,className:"group-hover/btn:rotate-12 transition-transform"})}),e.jsx("label",{htmlFor:"photo-upload",className:"p-1.5 bg-white/20 hover:bg-white/30 backdrop-blur-md rounded-lg text-white transition-all cursor-pointer border border-white/20 shadow-xl group/upload",title:"Ganti Foto",children:e.jsx(u,{size:14,className:"group-hover/upload:rotate-12 transition-transform"})})]})]}):e.jsxs("label",{htmlFor:"photo-upload",className:"flex flex-col items-center justify-center gap-2 w-full h-full cursor-pointer hover:bg-muted/30 transition-colors group",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center group-hover:scale-110 transition-transform mb-2",children:e.jsx(u,{size:18,className:"text-muted-foreground group-hover:text-brand-red transition-colors"})}),e.jsx("span",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest group-hover:text-brand-red transition-colors text-center px-2",children:"Upload Foto"})]})}),e.jsx("input",{type:"file",id:"photo-upload",accept:"image/*",onChange:L,className:"hidden"}),a.photo&&e.jsx("p",{className:"text-red-600 text-xs font-medium mt-2",children:a.photo})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(N,{size:14})," Video Hover (Max 10MB)"]}),e.jsx("div",{className:`group relative h-64 w-full max-w-[160px] mx-auto rounded-3xl overflow-hidden transition-all ${s.video?"bg-card border border-border shadow-md":"bg-muted/5 border-2 border-dashed border-border hover:border-brand-red/50"}`,children:s.video?e.jsxs(e.Fragment,{children:[e.jsx("video",{src:s.video instanceof File?URL.createObjectURL(s.video):s.video,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx("label",{htmlFor:"video-upload",className:"p-2 bg-white/20 hover:bg-white/30 backdrop-blur-md rounded-xl text-white transition-all cursor-pointer border border-white/20 shadow-xl group/upload",title:"Ganti Video",children:e.jsx(u,{size:16,className:"group-hover/upload:rotate-12 transition-transform"})})})]}):e.jsxs("label",{htmlFor:"video-upload",className:"flex flex-col items-center justify-center gap-2 w-full h-full cursor-pointer hover:bg-muted/30 transition-colors group",onDragOver:r=>{r.preventDefault(),r.stopPropagation()},onDrop:r=>{r.preventDefault(),r.stopPropagation();const i=r.dataTransfer.files;i&&i.length>0&&i[0].type.startsWith("video/")&&t("video",i[0])},children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center group-hover:scale-110 transition-transform mb-2",children:e.jsx(N,{size:18,className:"text-muted-foreground group-hover:text-brand-red transition-colors"})}),e.jsx("span",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest group-hover:text-brand-red transition-colors text-center px-2",children:"Drag & Drop Video"}),e.jsx("span",{className:"text-[10px] text-muted-foreground/50 font-medium",children:"atau klik untuk memilih"})]})}),e.jsx("input",{type:"file",id:"video-upload",accept:"video/*",onChange:r=>t("video",r.target.files[0]),className:"hidden"}),a.video&&e.jsx("p",{className:"text-red-600 text-xs font-medium mt-2",children:a.video})]})]})]}),e.jsxs("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center gap-2 px-6 py-2.5 bg-brand-red text-white rounded-xl font-bold text-sm hover:bg-brand-red/90 transition-all shadow-md shadow-red-200 disabled:opacity-50",children:[e.jsx(V,{size:18}),x?"Menyimpan...":"Simpan Data"]})]})]}),k&&e.jsx(O,{image:S,aspectRatio:9/16,onCropComplete:R,onCancel:()=>l(!1)},`cropper-${P}`)]})]})}H.layout=d=>e.jsx($,{children:d});export{H as default};
