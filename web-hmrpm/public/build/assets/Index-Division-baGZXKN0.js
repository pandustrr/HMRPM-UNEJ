import{c as J,r,j as e,H as O,L as d,I as Q,M as W,b}from"./app-Dr-qe37l.js";import{A as X}from"./AdminLayout-BjJPFavO.js";import Z from"./Detail-Division-CUlU9eOF.js";import ee from"./Detail-Member-yBfhfGSB.js";import{C as z}from"./chevron-down-B_zxC0gj.js";import{P as f,S as _}from"./square-pen-Crv3b2qH.js";import{U as j}from"./users-Bjgq_9_M.js";import{E as C}from"./eye-CGTQ5UOh.js";import{T as x}from"./trash-2-DScHzvH0.js";import{S as se}from"./search-BklFrwJg.js";import"./file-text-DdEopQ7c.js";import"./graduation-cap-BC1a482v.js";import"./index-Bm14vWMG.js";import"./chevron-right-CwKZBFzI.js";import"./chevron-left-nwOPkPhN.js";import"./Toast-CM92iiXC.js";import"./Modal-C7gvDuhA.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],re=J("linkedin",te);function ae({periods:c,selectedPeriodId:n,divisions:l}){var M;const[A,h]=r.useState(!1),[P,v]=r.useState(!1),[i,N]=r.useState(null),[L,$]=r.useState(null),[m,w]=r.useState(new URLSearchParams(window.location.search).get("show_all_members")==="1"||!!new URLSearchParams(window.location.search).get("member_division_id")),[a,y]=r.useState(new URLSearchParams(window.location.search).get("member_division_id")||""),T=s=>{y(s.toString()),w(!0),setTimeout(()=>{var t;(t=document.getElementById("members-section"))==null||t.scrollIntoView({behavior:"smooth"})},100)},[u,E]=r.useState(""),[H,k]=r.useState(!1),[I,R]=r.useState(null),[U,g]=r.useState(!1),[o,S]=r.useState(null),B=s=>{b.get("/admin/divisions",{period_id:s.target.value},{preserveState:!0})},K=s=>{$(s),v(!0)},q=s=>{R(s),k(!0)},F=s=>{S(s),g(!0)},V=()=>{o&&b.delete(`/admin/members/${o.id}`,{onSuccess:()=>{g(!1),S(null)},preserveScroll:!0})},Y=s=>{N(s),h(!0)},G=()=>{i&&b.delete(`/admin/divisions/${i.id}`,{onSuccess:()=>{h(!1),N(null)}})},D=(()=>{let s=[];return l.forEach(t=>{t.members&&t.members.length>0&&(s=s.concat(t.members))}),s})().filter(s=>{const t=!a||s.division_id===parseInt(a),p=!u||s.name.toLowerCase().includes(u.toLowerCase());return t&&p});return e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"Kelola Divisi & Pengurus"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Kelola Divisi & Pengurus"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Kelola divisi dan anggota pengurus per periode"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:n||"",onChange:B,className:"appearance-none bg-white border border-border rounded-xl px-4 py-2.5 pr-10 font-medium text-sm focus:outline-none focus:ring-2 focus:ring-brand-red/20",children:c.map(s=>e.jsx("option",{value:s.id,children:s.year},s.id))}),e.jsx(z,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none",size:16})]}),e.jsxs(d,{href:`/admin/divisions/create?period_id=${n}`,className:"flex items-center gap-2 bg-brand-red text-white px-4 py-2.5 rounded-xl font-bold hover:bg-brand-red/90 transition-colors",children:[e.jsx(f,{size:18}),"Tambah Divisi"]})]})]}),l.length===0?e.jsxs("div",{className:"bg-white rounded-2xl border border-border p-12 text-center",children:[e.jsx(j,{size:48,className:"mx-auto text-muted-foreground/30 mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-foreground mb-2",children:"Belum Ada Divisi"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Mulai tambahkan divisi untuk periode ini"}),e.jsxs(d,{href:`/admin/divisions/create?period_id=${n}`,className:"inline-flex items-center gap-2 bg-brand-red text-white px-6 py-3 rounded-xl font-bold hover:bg-brand-red/90 transition-colors",children:[e.jsx(f,{size:18}),"Tambah Divisi Pertama"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(s=>e.jsxs("div",{className:"bg-white rounded-2xl border border-border overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"h-32 bg-slate-100 relative overflow-hidden",children:[s.image&&e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-linear-to-t from-black/80 via-black/20 to-transparent"}),e.jsx("h3",{className:"absolute bottom-3 left-3 text-white font-bold text-base drop-shadow-lg",children:s.name})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.short_desc}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("button",{onClick:()=>K(s),className:"p-2 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-lg transition-colors",title:"Detail",children:e.jsx(C,{size:18})}),e.jsx("button",{onClick:()=>T(s.id),className:"p-2 bg-brand-red/5 hover:bg-brand-red/10 text-brand-red rounded-lg transition-colors",title:"Lihat Pengurus",children:e.jsx(j,{size:18})}),e.jsxs(d,{href:`/admin/divisions/${s.id}/edit`,className:"flex-1 flex items-center justify-center gap-2 bg-muted hover:bg-muted/80 text-foreground px-4 py-2 rounded-lg font-medium text-sm transition-colors",children:[e.jsx(_,{size:16}),"Edit"]}),e.jsx("button",{onClick:()=>Y(s),className:"p-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-colors",title:"Hapus",children:e.jsx(x,{size:18})})]})]})]},s.id))})]}),l.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:()=>w(!m),className:`flex-1 px-6 py-3 rounded-xl font-bold transition-all border border-transparent ${m?"bg-white text-brand-red border-brand-red shadow-sm":"bg-brand-red text-white hover:bg-brand-red/90 shadow-md"}`,children:m?"Tutup Daftar Pengurus":"Lihat Semua Pengurus"})})}),m&&e.jsxs("div",{id:"members-section",className:"bg-white rounded-2xl border border-border p-6 space-y-6 shadow-sm scroll-mt-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Daftar Pengurus"}),e.jsxs(d,{href:`/admin/members/create?period_id=${n}&filter_division_id=${a}&member_division_id=${a}`,className:"flex items-center justify-center gap-2 bg-brand-red text-white px-4 py-2.5 rounded-xl font-bold text-sm hover:bg-brand-red/90 transition-colors shadow-lg shadow-brand-red/20",children:[e.jsx(f,{size:16}),"Tambah Pengurus"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:a,onChange:s=>y(s.target.value),className:"w-full appearance-none bg-white border border-border rounded-xl px-4 py-2.5 pr-10 font-medium text-sm focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all",children:[e.jsx("option",{value:"",children:"Semua Divisi"}),l.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(z,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none",size:16})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Cari nama pengurus...",value:u,onChange:s=>E(s.target.value),className:"w-full pl-11 pr-4 py-2.5 bg-white border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all"}),e.jsx(se,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",size:18})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-linear-to-r from-muted/50 to-muted/30 border-b border-border",children:[e.jsx("th",{className:"px-3 sm:px-4 py-3 font-bold text-xs text-foreground",children:"Pengurus"}),e.jsx("th",{className:"px-3 sm:px-4 py-3 font-bold text-xs text-foreground",children:"Role & Divisi"}),e.jsx("th",{className:"px-3 sm:px-4 py-3 font-bold text-xs text-foreground",children:"Prodi & Angkatan"}),e.jsx("th",{className:"px-3 sm:px-4 py-3 font-bold text-xs text-foreground",children:"Media Sosial"}),e.jsx("th",{className:"px-3 sm:px-4 py-3 font-bold text-xs text-foreground text-right",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:D.length>0?D.map(s=>{var t;return e.jsxs("tr",{className:"hover:bg-linear-to-r hover:from-brand-red/5 hover:to-transparent transition-colors duration-200",children:[e.jsx("td",{className:"px-3 sm:px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-8 rounded-full overflow-hidden bg-muted border-2 border-brand-red/20 shadow-sm shrink-0 transition-all duration-200",children:e.jsx("img",{src:s.photo||"/storage/logo/hmrpm.png",alt:s.name,className:"w-full h-full object-cover",onError:p=>p.target.src="/storage/logo/hmrpm.png"})}),e.jsx("div",{className:"min-w-0",children:e.jsx("p",{className:"font-bold text-sm text-foreground line-clamp-1",children:s.name})})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"inline-flex items-center gap-1.5 bg-brand-red/10 text-brand-red px-2.5 py-1 rounded-full font-bold text-xs",children:s.role}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:(t=s.division)==null?void 0:t.name})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:s.prodi||"-"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Angkatan ",s.angkatan||"-"]})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[s.instagram&&e.jsx("a",{href:s.instagram,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg bg-pink-50 text-pink-600 hover:bg-pink-100 transition-colors duration-200 shadow-sm hover:shadow-md",title:"Instagram",children:e.jsx(Q,{size:16})}),s.linkedin&&e.jsx("a",{href:s.linkedin,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors duration-200 shadow-sm hover:shadow-md",title:"LinkedIn",children:e.jsx(re,{size:16})}),s.email&&e.jsx("a",{href:`mailto:${s.email}`,className:"p-2 rounded-lg bg-gray-50 text-gray-600 hover:bg-gray-100 transition-colors duration-200 shadow-sm hover:shadow-md",title:"Email",children:e.jsx(W,{size:16})}),!s.instagram&&!s.linkedin&&!s.email&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"Tidak ada"})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[e.jsx("button",{onClick:()=>q(s),className:"p-2 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-lg transition-colors duration-200",title:"Detail",children:e.jsx(C,{size:16})}),e.jsx(d,{href:`/admin/members/${s.id}/edit?filter_division_id=${a}`,className:"p-2 bg-muted hover:bg-muted/80 text-foreground rounded-lg transition-colors duration-200",title:"Edit",children:e.jsx(_,{size:16})}),e.jsx("button",{onClick:()=>F(s),className:"p-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-colors duration-200",title:"Hapus",children:e.jsx(x,{size:16})})]})})]},s.id)}):e.jsx("tr",{children:e.jsxs("td",{colSpan:"5",className:"px-4 sm:px-6 py-12 text-center text-muted-foreground",children:[e.jsx(j,{size:48,className:"mx-auto opacity-20 mb-4"}),e.jsx("p",{className:"font-medium",children:"Tidak ada pengurus ditemukan"})]})})})]})})]})]}),e.jsx(ee,{show:H,onClose:()=>k(!1),member:I}),e.jsx(Z,{show:P,onClose:()=>v(!1),division:L,periodYear:(M=c.find(s=>s.id===parseInt(n)))==null?void 0:M.year}),U&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-xs w-full shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex items-center gap-3 text-red-600 mb-3",children:[e.jsx("div",{className:"p-1.5 bg-red-50 rounded-lg",children:e.jsx(x,{size:20})}),e.jsx("h3",{className:"text-lg font-bold",children:"Hapus Pengurus?"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-6",children:["Apakah Anda yakin ingin menghapus pengurus ",e.jsx("strong",{children:o==null?void 0:o.name}),"?"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 bg-muted hover:bg-muted/80 rounded-xl font-bold text-sm transition-colors",children:"Batal"}),e.jsx("button",{onClick:V,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-xl font-bold text-sm transition-colors shadow-lg shadow-red-100",children:"Hapus"})]})]})}),A&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-xs w-full shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex items-center gap-3 text-red-600 mb-3",children:[e.jsx("div",{className:"p-1.5 bg-red-50 rounded-lg",children:e.jsx(x,{size:20})}),e.jsx("h3",{className:"text-lg font-bold",children:"Hapus Divisi?"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-6 leading-relaxed",children:["Apakah Anda yakin ingin menghapus divisi ",e.jsx("strong",{children:i==null?void 0:i.name}),"? Semua anggota di dalamnya juga akan terhapus."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 bg-muted hover:bg-muted/80 rounded-xl font-bold text-sm transition-colors",children:"Batal"}),e.jsx("button",{onClick:G,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-xl font-bold text-sm transition-colors shadow-lg shadow-red-100",children:"Hapus"})]})]})})]})}ae.layout=c=>e.jsx(X,{children:c});export{ae as default};
