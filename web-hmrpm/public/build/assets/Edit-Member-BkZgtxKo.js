import{u as R,r as d,j as e,H as M,L as E,M as b,I as A}from"./app-BsDCLgsd.js";import{A as I}from"./AdminLayout-BzJBPKA0.js";import{S as $,I as O}from"./ImageCropper-BF66d-ZL.js";import{A as V}from"./arrow-left-BeEZMlg8.js";import{U as v}from"./user-ChapMY3Q.js";import{C as j}from"./chevron-down-CBxsPo30.js";import{U as p}from"./upload-CeMf_9aq.js";import{V as N}from"./video-CGNSFmbn.js";import{S as B}from"./save-COw1thEO.js";import"./users-CbBri5PR.js";import"./file-text-CYZ2Wlgc.js";import"./graduation-cap-BmbWGz5e.js";import"./index-Bmg_cQlb.js";import"./chevron-right-DAb9T5op.js";import"./chevron-left-CWgBX94_.js";import"./Toast-Bdjx6Kdi.js";function H({member:o,periods:n,filter_division_id:y}){var g,f;const{data:s,setData:a,post:w,processing:m,errors:t}=R({_method:"PUT",division_id:o.division_id||"",period_id:((g=o.division)==null?void 0:g.period_id)||((f=n[0])==null?void 0:f.id)||"",filter_division_id:y||"",division_id_source:new URLSearchParams(window.location.search).get("division_id_source")||"",name:o.name||"",role:o.role||"",prodi:o.prodi||"",angkatan:o.angkatan||"",photo:null,video:null,instagram:o.instagram||"",email:o.email||""}),[_,x]=d.useState([]),[C,l]=d.useState(!1),[k,S]=d.useState(null),[c,h]=d.useState(null),[z,U]=d.useState(0);d.useEffect(()=>{if(!s.photo){h(null);return}const r=URL.createObjectURL(s.photo);return h(r),()=>URL.revokeObjectURL(r)},[s.photo]),d.useEffect(()=>{const r=n.find(i=>i.id===parseInt(s.period_id));x(r?r.divisions||[]:[])},[s.period_id,n]);const D=r=>{const i=r.target.files[0];if(i){a("photo",i);const u=new FileReader;u.onload=()=>{S(u.result),U(L=>L+1)},u.readAsDataURL(i)}},P=r=>{a("photo",r),l(!1)},F=r=>{r.preventDefault(),w(`/admin/members/${o.id}`,{forceFormData:!0,preserveScroll:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:`Edit ${o.name}`}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(E,{href:s.division_id_source?`/admin/divisions/${s.division_id_source}/edit`:`/admin/divisions?period_id=${s.period_id}&show_all_members=1&member_division_id=${s.filter_division_id}`,className:"p-2 hover:bg-muted rounded-lg transition-colors",children:e.jsx(V,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-foreground",children:"Edit Pengurus"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Perbarui data anggota pengurus"})]})]}),e.jsxs("form",{onSubmit:F,className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-border p-6 ml-1 space-y-6 shadow-sm",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(v,{size:20,className:"text-brand-red"}),"Informasi Pribadi"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-foreground",children:"Nama Lengkap"}),e.jsx("input",{type:"text",value:s.name,onChange:r=>a("name",r.target.value),className:"w-full px-4 py-2.5 bg-muted/30 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all"}),t.name&&e.jsx("p",{className:"text-red-600 text-xs font-medium",children:t.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-foreground",children:"Role / Jabatan"}),e.jsx("input",{type:"text",value:s.role,onChange:r=>a("role",r.target.value),className:"w-full px-4 py-2.5 bg-muted/30 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all"}),t.role&&e.jsx("p",{className:"text-red-600 text-xs font-medium",children:t.role})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-foreground",children:"Program Studi"}),e.jsx("input",{type:"text",value:s.prodi,onChange:r=>a("prodi",r.target.value),className:"w-full px-4 py-2.5 bg-muted/30 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all"}),t.prodi&&e.jsx("p",{className:"text-red-600 text-xs font-medium",children:t.prodi})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-foreground",children:"Angkatan"}),e.jsx("input",{type:"text",value:s.angkatan,onChange:r=>a("angkatan",r.target.value),className:"w-full px-4 py-2.5 bg-muted/30 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all"}),t.angkatan&&e.jsx("p",{className:"text-red-600 text-xs font-medium",children:t.angkatan})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-border p-6 shadow-sm space-y-6",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(b,{size:20,className:"text-brand-red"}),"Hubungan & Media Sosial"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-bold text-foreground flex items-center gap-2",children:[e.jsx(A,{size:14})," Instagram URL"]}),e.jsx("input",{type:"url",value:s.instagram,onChange:r=>a("instagram",r.target.value),className:"w-full px-4 py-2.5 bg-muted/30 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs("label",{className:"text-sm font-bold text-foreground flex items-center gap-2",children:[e.jsx(b,{size:14})," Email Address"]}),e.jsx("input",{type:"email",value:s.email,onChange:r=>a("email",r.target.value),className:"w-full px-4 py-2.5 bg-muted/30 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all"})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-border p-6 shadow-sm space-y-4",children:[e.jsx("h2",{className:"font-bold text-foreground",children:"Organisasi"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Periode"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:s.period_id,onChange:r=>a("period_id",r.target.value),className:"w-full appearance-none bg-muted/30 border border-border rounded-xl px-4 py-2.5 pr-10 font-bold text-sm focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all",children:n.map(r=>e.jsx("option",{value:r.id,children:r.year},r.id))}),e.jsx(j,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none",size:16})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Divisi"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:s.division_id,onChange:r=>a("division_id",r.target.value),className:"w-full appearance-none bg-muted/30 border border-border rounded-xl px-4 py-2.5 pr-10 font-bold text-sm focus:outline-none focus:ring-2 focus:ring-brand-red/20 transition-all",children:[e.jsx("option",{value:"",children:"Pilih Divisi"}),_.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),e.jsx(j,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none",size:16})]}),t.division_id&&e.jsx("p",{className:"text-red-600 text-xs font-medium",children:t.division_id})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-border p-4 shadow-sm space-y-4",children:[e.jsx("h2",{className:"font-bold text-foreground",children:"Media"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(v,{size:12})," Foto Profil (Max 2MB)"]}),e.jsx("div",{className:`group relative h-64 w-full max-w-[160px] mx-auto rounded-3xl overflow-hidden transition-all ${c||o.photo?"bg-card border border-border shadow-md":"bg-muted/5 border-2 border-dashed border-border hover:border-brand-red/50"}`,children:c||o.photo?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:c||o.photo,alt:o.name,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-500",onError:r=>r.target.src="/storage/logo/hmrpm.png"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[s.photo&&e.jsx("button",{type:"button",onClick:()=>l(!0),className:"p-1.5 bg-brand-red text-white backdrop-blur-md rounded-lg transition-all shadow-xl hover:bg-brand-red/90 hover:scale-110 active:scale-95 group/btn",title:"Potong Gambar",children:e.jsx($,{size:14,className:"group-hover/btn:rotate-12 transition-transform"})}),e.jsx("label",{htmlFor:"photo-upload",className:"p-1.5 bg-white/20 hover:bg-white/30 backdrop-blur-md rounded-lg text-white transition-all cursor-pointer border border-white/20 shadow-xl group/upload",title:"Ganti Foto",children:e.jsx(p,{size:14,className:"group-hover/upload:rotate-12 transition-transform"})})]})]}):e.jsxs("label",{htmlFor:"photo-upload",className:"flex flex-col items-center justify-center gap-2 w-full h-full cursor-pointer hover:bg-muted/30 transition-colors group",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center group-hover:scale-110 transition-transform mb-2",children:e.jsx(p,{size:18,className:"text-muted-foreground group-hover:text-brand-red transition-colors"})}),e.jsx("span",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest group-hover:text-brand-red transition-colors text-center px-2",children:"Upload Foto"})]})}),e.jsx("input",{type:"file",id:"photo-upload",accept:"image/*",onChange:D,className:"hidden"}),t.photo&&e.jsx("p",{className:"text-red-600 text-xs font-medium mt-2",children:t.photo})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(N,{size:14})," Video Hover (Max 10MB)"]}),e.jsx("div",{className:`group relative h-64 w-full max-w-[160px] mx-auto rounded-3xl overflow-hidden transition-all ${s.video||o.video?"bg-card border border-border shadow-md":"bg-muted/5 border-2 border-dashed border-border hover:border-brand-red/50"}`,children:s.video||o.video?e.jsxs(e.Fragment,{children:[e.jsx("video",{src:s.video?s.video instanceof File?URL.createObjectURL(s.video):s.video:o.video,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx("label",{htmlFor:"video-upload",className:"p-2 bg-white/20 hover:bg-white/30 backdrop-blur-md rounded-xl text-white transition-all cursor-pointer border border-white/20 shadow-xl group/upload",title:"Ganti Video",children:e.jsx(p,{size:16,className:"group-hover/upload:rotate-12 transition-transform"})})})]}):e.jsxs("label",{htmlFor:"video-upload",className:"flex flex-col items-center justify-center gap-2 w-full h-full cursor-pointer hover:bg-muted/30 transition-colors group",onDragOver:r=>{r.preventDefault(),r.stopPropagation()},onDrop:r=>{r.preventDefault(),r.stopPropagation();const i=r.dataTransfer.files;i&&i.length>0&&i[0].type.startsWith("video/")&&a("video",i[0])},children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center group-hover:scale-110 transition-transform mb-2",children:e.jsx(N,{size:18,className:"text-muted-foreground group-hover:text-brand-red transition-colors"})}),e.jsx("span",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest group-hover:text-brand-red transition-colors text-center px-2",children:"Drag & Drop Video"}),e.jsx("span",{className:"text-[10px] text-muted-foreground/50 font-medium",children:"atau klik untuk memilih"})]})}),e.jsx("input",{type:"file",id:"video-upload",accept:"video/*",onChange:r=>a("video",r.target.files[0]),className:"hidden"}),t.video&&e.jsx("p",{className:"text-red-600 text-xs font-medium mt-2",children:t.video})]})]})]}),e.jsxs("button",{type:"submit",disabled:m,className:"w-full flex items-center justify-center gap-2 px-6 py-2.5 bg-brand-red text-white rounded-xl font-bold text-sm hover:bg-brand-red/90 transition-all shadow-md shadow-red-200 disabled:opacity-50",children:[e.jsx(B,{size:18}),m?"Menyimpan...":"Perbarui Data"]})]})]}),C&&e.jsx(O,{image:k,aspectRatio:9/16,onCropComplete:P,onCancel:()=>l(!1)},`cropper-${z}`)]})]})}H.layout=o=>e.jsx(I,{children:o});export{H as default};
