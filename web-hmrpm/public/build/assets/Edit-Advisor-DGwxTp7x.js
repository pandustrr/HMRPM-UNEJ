import{u as A,r as d,j as e,H as S,L,a as T}from"./app-Dr-qe37l.js";import{I as U,A as F}from"./AdminLayout-BjJPFavO.js";import{S as R,I as z}from"./ImageCropper-B6fEoiIK.js";import{C as M}from"./chevron-left-nwOPkPhN.js";import{U as g}from"./upload-TG1143yt.js";import{V as f}from"./video-DXHq9M6-.js";import{S as D}from"./save-BTgP8imT.js";import{C as K}from"./Toast-CM92iiXC.js";import"./users-Bjgq_9_M.js";import"./file-text-DdEopQ7c.js";import"./graduation-cap-BC1a482v.js";import"./index-Bm14vWMG.js";import"./chevron-right-CwKZBFzI.js";import"./chevron-down-B_zxC0gj.js";const E=({advisor:a})=>{const{data:s,setData:r,post:c,processing:p,errors:l}=A({_method:"PUT",type:a.type||"pembina",name:a.name||"",nidn:a.nidn||"",nip_nik:a.nip_nik||"",birth_place:a.birth_place||"",birth_date:a.birth_date?a.birth_date.split("T")[0]:"",gender:a.gender||" Laki-laki",religion:a.religion||"",rank:a.rank||"",position:a.position||"",university:a.university||"Universitas Jember",address:a.address||"",phone_office:a.phone_office||"",address_home:a.address_home||"",phone_home:a.phone_home||"",email:a.email||"",image:null,video:null,is_active:!!a.is_active,_method:"PUT"}),[i,x]=d.useState(null),[b,j]=d.useState(a.video||null),[v,m]=d.useState(!1),[u,N]=d.useState(null),[w,k]=d.useState(0),y=t=>{const o=t.target.files[0];if(o){r("image",o);const h=new FileReader;h.onload=()=>{x(h.result),N(h.result),k(I=>I+1),m(!0)},h.readAsDataURL(o)}},C=t=>{r("image",t);const o=URL.createObjectURL(t);x(o),m(!1)},_=t=>{const o=t.target.files[0];o&&(r("video",o),j(URL.createObjectURL(o)))},P=t=>{t.preventDefault(),c(`/admin/advisors/${a.id}`,{forceFormData:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(S,{title:`Edit ${a.name} | HMRPM Admin`}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pb-12 text-sm",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(L,{href:"/admin/advisors",className:"w-10 h-10 rounded-xl bg-white border border-slate-200 flex items-center justify-center text-slate-500 hover:text-brand-red transition-all shadow-sm",children:e.jsx(M,{size:20})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-black text-slate-900 tracking-tighter uppercase truncate max-w-md",children:["Edit: ",a.name]}),e.jsx("p",{className:"text-slate-500 text-xs font-medium",children:"Perbarui informasi Pembina atau Pendamping."})]})]})}),e.jsxs("form",{onSubmit:P,className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-4xl border border-slate-200 p-6 shadow-sm space-y-5",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-slate-700 text-xs font-black uppercase tracking-widest",children:"Tipe & Status"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{type:"button",onClick:()=>r("type","pembina"),className:`p-3 rounded-xl border-2 transition-all font-bold text-sm ${s.type==="pembina"?"border-brand-red bg-brand-red/5 text-brand-red":"border-slate-50 bg-slate-50 text-slate-400"}`,children:"Pembina"}),e.jsx("button",{type:"button",onClick:()=>r("type","pendamping"),className:`p-3 rounded-xl border-2 transition-all font-bold text-sm ${s.type==="pendamping"?"border-brand-yellow bg-brand-yellow/5 text-brand-yellow":"border-slate-50 bg-slate-50 text-slate-400"}`,children:"Pendamping"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[e.jsx("span",{className:"font-bold text-slate-600 text-sm",children:"Status Aktif"}),e.jsx("button",{type:"button",onClick:()=>r("is_active",!s.is_active),className:`w-12 h-6 rounded-full relative transition-colors ${s.is_active?"bg-green-500":"bg-slate-300"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-all ${s.is_active?"left-7":"left-1"}`})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-slate-700 text-[10px] font-black uppercase tracking-widest text-center",children:"Foto Profil (3:4)"}),e.jsx("input",{type:"file",id:"photo-upload",accept:"image/*",onChange:y,className:"hidden"}),e.jsx("div",{className:`group relative h-56 sm:h-72 w-full max-w-[200px] mx-auto rounded-3xl overflow-hidden transition-all ${i||a.image?"bg-card border border-border shadow-md":"bg-slate-50 border-2 border-dashed border-slate-200 hover:border-brand-red/50 hover:bg-brand-red/5"}`,children:i||a.image?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:i||a.image,className:"w-full h-full object-cover",alt:"Preview"}),e.jsxs("div",{className:"absolute top-3 right-3 flex gap-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[u&&e.jsx("button",{type:"button",onClick:()=>m(!0),className:"p-2 bg-white/20 hover:bg-white/30 backdrop-blur-md rounded-xl text-white transition-all shadow-xl border border-white/20 group/crop",title:"Potong Gambar",children:e.jsx(R,{size:16,className:"group-hover/crop:rotate-12 transition-transform"})}),e.jsx("label",{htmlFor:"photo-upload",className:"p-2 bg-white/20 hover:bg-white/30 backdrop-blur-md rounded-xl text-white transition-all cursor-pointer border border-white/20 shadow-xl group/upload",title:"Ganti Foto",children:e.jsx(g,{size:16,className:"group-hover/upload:rotate-12 transition-transform"})})]})]}):e.jsxs("label",{htmlFor:"photo-upload",className:"flex flex-col items-center justify-center gap-2 w-full h-full cursor-pointer transition-colors group",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white border border-slate-200 flex items-center justify-center text-slate-300 group-hover:text-brand-red group-hover:border-brand-red/30 group-hover:scale-110 transition-all shadow-sm",children:e.jsx(g,{size:18})}),e.jsx("span",{className:"text-[10px] font-black uppercase text-slate-400 group-hover:text-brand-red tracking-widest text-center px-2",children:"Upload Foto"})]})}),l.image&&e.jsx("p",{className:"text-brand-red text-[10px] font-bold text-center",children:l.image})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-100",children:[e.jsxs("label",{className:"block text-slate-700 text-[10px] font-black uppercase tracking-widest text-center flex items-center justify-center gap-2",children:[e.jsx(f,{size:12})," Video Hover (MP4)"]}),e.jsxs("div",{className:"relative group h-56 sm:h-72 w-full max-w-[200px] mx-auto rounded-3xl overflow-hidden transition-all bg-slate-50 border-2 border-dashed border-slate-200 hover:border-brand-red/50 hover:bg-brand-red/5",children:[e.jsx("input",{type:"file",onChange:_,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",accept:"video/mp4"}),e.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center gap-3 overflow-hidden pointer-events-none",children:b?e.jsx("video",{src:b,className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white border border-slate-200 flex items-center justify-center group-hover:scale-110 transition-transform mb-2",children:e.jsx(f,{size:18,className:"text-slate-300 group-hover:text-brand-red transition-colors"})}),e.jsx("span",{className:"text-[10px] font-black uppercase text-slate-400 group-hover:text-brand-red tracking-widest text-center px-2",children:"Drag & Drop Video"})]})}),b&&e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center rounded-2xl pointer-events-none",children:e.jsx("span",{className:"text-white font-black text-[10px] uppercase tracking-widest",children:"Ganti Video"})})]}),e.jsx("p",{className:"text-[9px] text-slate-400 text-center font-medium uppercase tracking-tight",children:"Ganti video? Pilih file baru (Maks. 10MB)"}),l.video&&e.jsx("p",{className:"text-brand-red text-[10px] font-bold text-center",children:l.video})]})]})]}),e.jsxs("button",{type:"submit",disabled:p,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-slate-900 hover:bg-brand-red text-white rounded-2xl font-black transition-all shadow-xl hover:shadow-brand-red/20 disabled:opacity-50 group tracking-widest text-sm",children:[e.jsx(D,{size:18,className:"group-hover:scale-110 transition-transform"}),p?"MENYIMPAN...":"PERBARUI DATA"]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-4xl border border-slate-200 p-6 shadow-sm space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 border-b border-slate-100 pb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-brand-red/5 flex items-center justify-center text-brand-red",children:e.jsx(U,{size:16})}),e.jsx("h2",{className:"text-sm font-black text-slate-900 tracking-widest uppercase",children:"Identitas & Jabatan"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(n,{label:"Nama Lengkap & Gelar",value:s.name,onChange:t=>r("name",t),error:l.name,placeholder:"Contoh: Ir. Robertus Sidartawan, S.T., M.T., IPM",fullWidth:!0}),e.jsx(n,{label:"NIDN",value:s.nidn,onChange:t=>r("nidn",t),error:l.nidn,placeholder:"Nomor Induk Dosen Nasional"}),e.jsx(n,{label:"NIP / NIK",value:s.nip_nik,onChange:t=>r("nip_nik",t),error:l.nip_nik,placeholder:"NIP atau NIK"}),e.jsx(n,{label:"Jabatan",value:s.position,onChange:t=>r("position",t),error:l.position,placeholder:"Contoh: Kaprodi / Dosen"}),e.jsx(n,{label:"Pangkat / Golongan",value:s.rank,onChange:t=>r("rank",t),error:l.rank,placeholder:"Contoh: Penata / IIId"}),e.jsx(n,{label:"Institusi / PT",value:s.university,onChange:t=>r("university",t),error:l.university,placeholder:"Contoh: Universitas Jember"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-slate-700 text-[10px] font-black uppercase tracking-widest px-1",children:"Jenis Kelamin"}),e.jsxs("select",{value:s.gender,onChange:t=>r("gender",t.target.value),className:"w-full h-10 bg-slate-50 border border-slate-100 rounded-xl px-4 font-bold text-slate-700 focus:border-brand-red outline-hidden transition-all text-xs",children:[e.jsx("option",{value:"Laki-laki",children:"Laki-laki"}),e.jsx("option",{value:"Perempuan",children:"Perempuan"})]})]}),e.jsx(n,{label:"Agama",value:s.religion,onChange:t=>r("religion",t),error:l.religion})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t border-slate-50",children:[e.jsx(n,{label:"Tempat Lahir",value:s.birth_place,onChange:t=>r("birth_place",t),error:l.birth_place}),e.jsx(n,{label:"Tanggal Lahir",type:"date",value:s.birth_date,onChange:t=>r("birth_date",t),error:l.birth_date})]})]}),e.jsxs("div",{className:"bg-white rounded-4xl border border-slate-200 p-6 shadow-sm space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 border-b border-slate-100 pb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-brand-yellow/5 flex items-center justify-center text-brand-yellow",children:e.jsx(T,{size:16})}),e.jsx("h2",{className:"text-sm font-black text-slate-900 tracking-widest uppercase",children:"Kontak & Alamat"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx(n,{label:"E-mail",type:"email",value:s.email,onChange:t=>r("email",t),error:l.email,placeholder:"Alamat E-mail Aktif"}),e.jsx(n,{label:"Telp. / HP (Pribadi)",value:s.phone_home,onChange:t=>r("phone_home",t),error:l.phone_home,placeholder:"Nomor Telepon Pribadi"}),e.jsx(n,{label:"Telp. / Faks (Kantor)",value:s.phone_office,onChange:t=>r("phone_office",t),error:l.phone_office,placeholder:"Nomor Telepon Kantor"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-slate-700 text-[10px] font-black uppercase tracking-widest px-1",children:"Alamat Kantor / PT"}),e.jsx("textarea",{value:s.address,onChange:t=>r("address",t.target.value),rows:"2",className:"w-full bg-slate-50 border border-slate-100 rounded-4xl p-3 font-medium text-slate-700 focus:border-brand-red outline-hidden transition-all text-xs",placeholder:"Alamat kantor lengkap..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-slate-700 text-[10px] font-black uppercase tracking-widest px-1",children:"Alamat Rumah"}),e.jsx("textarea",{value:s.address_home,onChange:t=>r("address_home",t.target.value),rows:"2",className:"w-full bg-slate-50 border border-slate-100 rounded-4xl p-3 font-medium text-slate-700 focus:border-brand-yellow outline-hidden transition-all text-xs",placeholder:"Alamat rumah lengkap (bisa beberapa baris)..."})]})]})]})]})]})]}),v&&u&&e.jsx(z,{image:u,aspectRatio:3/4,onCropComplete:C,onCancel:()=>m(!1)},`cropper-${w}`)]})]})},n=({label:a,value:s,onChange:r,error:c,type:p="text",placeholder:l="",fullWidth:i=!1})=>e.jsxs("div",{className:`space-y-2 ${i?"md:col-span-2":""}`,children:[e.jsx("label",{className:"block text-slate-700 text-[10px] font-black uppercase tracking-widest px-1",children:a}),e.jsx("input",{type:p,value:s||"",onChange:x=>r(x.target.value),placeholder:l,className:"w-full h-10 bg-slate-50 border border-slate-100 rounded-xl px-4 font-bold text-slate-900 placeholder:text-slate-300 focus:border-brand-red outline-hidden transition-all text-xs"}),c&&e.jsxs("p",{className:"text-brand-red text-[10px] font-bold px-1 flex items-center gap-1",children:[e.jsx(K,{size:10})," ",c]})]});E.layout=a=>e.jsx(F,{children:a});export{E as default};
