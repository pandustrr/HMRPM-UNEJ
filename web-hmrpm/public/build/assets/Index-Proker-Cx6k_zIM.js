import{u as N,r as n,j as e,H as w,b as y}from"./app-Dr-qe37l.js";import{A as C}from"./AdminLayout-BjJPFavO.js";import{C as P}from"./ConfirmModal-vX8zJtVw.js";import{I as S,S as R}from"./ImageCropper-B6fEoiIK.js";import{I as F}from"./image-DkO6J-A8.js";import{F as I}from"./film-D-hkT8AH.js";import{U as A}from"./upload-TG1143yt.js";import{C as G}from"./Toast-CM92iiXC.js";import{T as M}from"./trash-2-DScHzvH0.js";import{S as U}from"./save-BTgP8imT.js";import"./users-Bjgq_9_M.js";import"./file-text-DdEopQ7c.js";import"./graduation-cap-BC1a482v.js";import"./index-Bm14vWMG.js";import"./chevron-right-CwKZBFzI.js";import"./chevron-left-nwOPkPhN.js";import"./chevron-down-B_zxC0gj.js";const z=({settings:t})=>{const{data:s,setData:r,post:h,processing:m,errors:x}=N({type:(t==null?void 0:t.type)||"image",file:null}),[d,o]=n.useState((t==null?void 0:t.value)||null),[f,c]=n.useState(!1),[u,b]=n.useState(null),[g,p]=n.useState(!1),j=a=>{const l=a.target.files[0];if(l)if(s.type==="image"){const i=new FileReader;i.onload=()=>{o(i.result),b(i.result),r("file",l)},i.readAsDataURL(l)}else r("file",l),o(URL.createObjectURL(l)),b(null)},v=a=>{a.preventDefault(),h("/admin/proker",{forceFormData:!0})},k=()=>{c(!1),y.delete("/admin/proker",{onSuccess:()=>{o(null),r("file",null)}})};return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Background Proker | HMRPM Admin"}),e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-black text-slate-900 tracking-tighter mb-1 uppercase",children:"BACKGROUND PROKER"}),e.jsx("p",{className:"text-slate-500 text-xs font-medium",children:"Kelola tampilan hero background halaman Proker (Video/Gambar/GIF)."})]}),e.jsx("div",{className:"bg-white rounded-4xl border border-slate-200 p-6 shadow-sm",children:e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-slate-700 text-[10px] font-black uppercase tracking-widest px-1",children:"Tipe Background"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[{id:"image",label:"Gambar",icon:F},{id:"video",label:"Video (MP4/GIF)",icon:I}].map(a=>e.jsxs("button",{type:"button",onClick:()=>r("type",a.id),className:`flex items-center justify-center gap-3 p-3 rounded-xl border-2 transition-all ${s.type===a.id?"border-brand-red bg-brand-red/5 text-brand-red shadow-lg shadow-brand-red/10":"border-slate-100 bg-slate-50 text-slate-500 hover:border-slate-200"}`,children:[e.jsx(a.icon,{size:18}),e.jsx("span",{className:"font-bold text-sm",children:a.label})]},a.id))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-slate-700 text-[10px] font-black uppercase tracking-widest px-1",children:"Unggah File Baru"}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"file",onChange:j,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",accept:s.type==="video"?"video/mp4":"image/*"}),e.jsxs("div",{className:"border-2 border-dashed border-slate-200 group-hover:border-brand-red/50 rounded-3xl p-8 flex flex-col items-center justify-center gap-3 transition-all bg-slate-50 group-hover:bg-brand-red/5",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white flex items-center justify-center text-slate-400 group-hover:text-brand-red transition-all shadow-sm",children:e.jsx(A,{size:24})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-slate-900 font-bold text-sm",children:"Pilih file atau tarik kesini"}),e.jsx("p",{className:"text-slate-500 text-[10px]",children:"MP4, JPG, PNG, atau GIF (Maks. 20MB)"})]})]})]}),x.file&&e.jsxs("p",{className:"text-brand-red text-[10px] font-bold flex items-center gap-2 mt-2 px-1",children:[e.jsx(G,{size:12})," ",x.file]})]}),s.type==="image"&&g&&u&&e.jsx(S,{image:u,aspectRatio:20/9,onCropComplete:a=>{r("file",a),o(URL.createObjectURL(a)),p(!1)},onCancel:()=>{p(!1)}}),d&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-slate-700 text-[10px] font-black uppercase tracking-widest px-1",children:"Preview Saat Ini"}),e.jsxs("div",{className:"relative rounded-2xl overflow-hidden aspect-video border border-slate-200 shadow-inner bg-slate-100 max-w-lg mx-auto",children:[s.type==="video"?e.jsx("video",{src:d,className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0}):e.jsx("img",{src:d,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-3 left-3 py-0.5 px-2.5 bg-brand-red text-white text-[9px] font-black uppercase tracking-widest rounded-full shadow-lg",children:"Tampilan Aktif"}),s.file&&s.type==="image"&&e.jsx("button",{type:"button",onClick:()=>p(!0),className:"absolute top-3 right-3 p-2 bg-brand-red text-white rounded-xl shadow-xl hover:bg-brand-red/90 transition-all hover:scale-110 active:scale-95 group/crop",title:"Potong Gambar",children:e.jsx(R,{size:16,className:"group-hover/crop:rotate-12 transition-transform"})})]})]}),e.jsxs("div",{className:"pt-5 border-t border-slate-100 flex justify-between items-center text-xs",children:[t&&e.jsxs("button",{type:"button",onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-3 text-slate-500 hover:text-brand-red font-bold transition-all group",children:[e.jsx(M,{size:18,className:"group-hover:scale-110 transition-transform"}),"Hapus Background"]}),e.jsxs("button",{type:"submit",disabled:m,className:"flex items-center gap-2 px-6 py-3 bg-slate-900 hover:bg-brand-red text-white rounded-xl font-black transition-all shadow-xl hover:shadow-brand-red/20 disabled:opacity-50 group ml-auto uppercase tracking-widest",children:[e.jsx(U,{size:18,className:"group-hover:scale-110 transition-transform"}),m?"Menyimpan...":"Simpan Perubahan"]})]})]})}),e.jsx(P,{isOpen:f,title:"Hapus Background?",message:"Apakah Anda yakin ingin menghapus background custom dan kembali ke default sistem?",onConfirm:k,onCancel:()=>c(!1)})]})]})};z.layout=t=>e.jsx(C,{children:t});export{z as default};
