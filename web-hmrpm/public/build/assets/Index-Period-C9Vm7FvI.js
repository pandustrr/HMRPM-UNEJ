import{r as d,u as B,j as e,H as K,X as z,b as m}from"./app-BDE2AaDe.js";import{A as L}from"./AdminLayout-DRLIiVFN.js";import{S as $,I as G}from"./ImageCropper-uI6iYpD8.js";import{P as O,S as A}from"./square-pen-UgTrjlaW.js";import{C as f}from"./calendar-0lxNvKh2.js";import{E as D}from"./eye-DRN5bZNc.js";import{T as j}from"./trash-2-CTb1tNdp.js";import{I as q}from"./image-BWqdTPE1.js";import{F as J}from"./film-Cy1mVT_t.js";import{U as V}from"./upload-CSZiJDLr.js";import"./users-BV1tXCkV.js";import"./file-text-BipYlanU.js";import"./graduation-cap-DAsRhiDT.js";import"./index-C0R1yrz4.js";import"./chevron-right-q_Th7CUI.js";import"./chevron-left-Db9v-oEa.js";import"./chevron-down-Dtr0tCQU.js";import"./Toast-wOax5C-Q.js";function X({periods:c}){const[F,o]=d.useState(!1),[l,v]=d.useState(null),[I,h]=d.useState(!1),[n,N]=d.useState(null),[M,u]=d.useState(!1),[a,T]=d.useState(null),[w,y]=d.useState(null),[U,b]=d.useState(!1),{data:r,setData:i,post:Q,put:W,processing:k,errors:x,reset:p}=B({year:"",is_active:!1,is_archived:!1,hero_image:null,hero_type:"image",theme_color:"bg-brand-red"}),H=()=>{p(),v(null),o(!0)},_=s=>{i({year:s.year,is_active:s.is_active,is_archived:s.is_archived,hero_image:null,hero_type:s.hero_type||"image",theme_color:s.theme_color||"bg-brand-red"}),v(s),o(!0)},P=s=>{m.post(`/admin/periods/${s.id}/toggle-active`,{},{preserveScroll:!0})},R=s=>{s.preventDefault();const t=new FormData;t.append("year",r.year),t.append("is_active",r.is_active?"1":"0"),t.append("is_archived",r.is_archived?"1":"0"),t.append("hero_type",r.hero_type),t.append("theme_color",r.theme_color),r.hero_image instanceof File&&t.append("hero_image",r.hero_image),l?(t.append("_method","PUT"),m.post(`/admin/periods/${l.id}`,t,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{o(!1),p(),setHasUploadedNewImage(!1)}})):m.post("/admin/periods",t,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{o(!1),p(),setHasUploadedNewImage(!1)}})},S=s=>{N(s),h(!0)},E=()=>{n&&m.delete(`/admin/periods/${n.id}`,{onSuccess:()=>{h(!1),N(null)}})},C=s=>{T(s),u(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(K,{title:"Kelola Periode"}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Kelola Periode"}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Atur periode kepengurusan dan background hero"})]}),e.jsxs("button",{onClick:H,className:"flex items-center justify-center sm:justify-start gap-2 bg-brand-red text-white px-4 py-2.5 rounded-xl font-bold hover:bg-brand-red/90 transition-colors w-full sm:w-auto",children:[e.jsx(O,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Tambah Periode"}),e.jsx("span",{className:"sm:hidden",children:"Tambah"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-border overflow-hidden shadow-md hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-linear-to-r from-muted/50 to-muted/30 border-b border-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 font-bold text-sm text-foreground",children:"Periode"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 font-bold text-sm text-foreground",children:"Hero Image"}),e.jsx("th",{className:"text-center px-4 sm:px-6 py-4 font-bold text-sm text-foreground",children:"Status"}),e.jsx("th",{className:"text-right px-4 sm:px-6 py-4 font-bold text-sm text-foreground",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:c.map(s=>e.jsxs("tr",{className:"hover:bg-linear-to-r hover:from-brand-red/5 hover:to-transparent transition-colors duration-200",children:[e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-brand-red/10 rounded-lg",children:e.jsx(f,{size:18,className:"text-brand-red"})}),e.jsx("span",{className:"font-bold text-foreground",children:s.year})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:s.hero_image?e.jsx("div",{className:"h-12 w-20 rounded-lg overflow-hidden border border-border shadow-sm",children:s.hero_type==="video"?e.jsx("video",{src:s.hero_image,className:"w-full h-full object-cover",muted:!0}):e.jsx("img",{src:s.hero_image,alt:"Hero",className:"w-full h-full object-cover"})}):e.jsx("div",{className:"h-12 w-20 rounded-lg bg-muted/50 flex items-center justify-center border border-dashed border-border",children:e.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:"Kosong"})})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-center",children:s.is_active?e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-[10px] font-bold bg-emerald-100 text-emerald-800 border border-emerald-200 shadow-sm",children:"Aktif"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-[10px] font-bold bg-brand-red/10 text-brand-red border border-brand-red/20 shadow-sm",children:"Diarsipkan"})}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>P(s),className:`px-3 py-1.5 text-[10px] font-bold rounded-lg transition-all shadow-lg active:scale-95 ${s.is_active?"border-brand-red bg-brand-red text-white shadow-brand-red/20":"bg-emerald-500 hover:bg-emerald-600 text-white shadow-emerald-200"}`,children:s.is_active?"Arsipkan":"Aktifkan"}),e.jsx("div",{className:"w-px h-6 bg-border mx-1"}),e.jsx("button",{onClick:()=>C(s),className:"p-2 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-lg transition-colors duration-200",children:e.jsx(D,{size:18})}),e.jsx("button",{onClick:()=>_(s),className:"p-2 bg-muted hover:bg-muted/80 text-foreground rounded-lg transition-colors duration-200",children:e.jsx(A,{size:18})}),e.jsx("button",{onClick:()=>S(s),className:"p-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-colors duration-200",children:e.jsx(j,{size:18})})]})})]},s.id))})]})}),e.jsx("div",{className:"md:hidden divide-y divide-border",children:c.map(s=>e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-brand-red/10 rounded-lg",children:e.jsx(f,{size:16,className:"text-brand-red"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground font-bold uppercase tracking-wider",children:"Periode"}),e.jsx("p",{className:"font-bold text-foreground",children:s.year})]})]})}),e.jsx("div",{children:s.hero_image?e.jsx("div",{className:"h-32 rounded-lg overflow-hidden border border-border shadow-sm",children:e.jsx("img",{src:s.hero_image,className:"w-full h-full object-cover",alt:""})}):e.jsx("div",{className:"w-full h-32 rounded-lg bg-muted/50 flex items-center justify-center border border-dashed border-border text-xs text-muted-foreground",children:"Tidak ada gambar"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>P(s),className:`px-3 py-1 text-[10px] font-black rounded-lg uppercase tracking-widest ${s.is_active?"bg-brand-red text-white":"bg-emerald-500 text-white"}`,children:s.is_active?"ARSIPKAN":"AKTIFKAN"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>C(s),className:"p-2 bg-blue-50 text-blue-600 rounded-lg",children:e.jsx(D,{size:16})}),e.jsx("button",{onClick:()=>_(s),className:"p-2 bg-muted text-foreground rounded-lg",children:e.jsx(A,{size:16})}),e.jsx("button",{onClick:()=>S(s),className:"p-2 bg-red-50 text-red-600 rounded-lg",children:e.jsx(j,{size:16})})]})]})]},s.id))})]})]}),F&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold",children:l?"Edit Periode":"Tambah Periode"}),e.jsx("button",{onClick:()=>o(!1),className:"text-muted-foreground hover:text-foreground",children:e.jsx(z,{size:24})})]}),e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-muted-foreground uppercase tracking-widest",children:"Tahun Periode"}),e.jsx("input",{type:"text",value:r.year,onChange:s=>i("year",s.target.value),placeholder:"2024/2025",className:"w-full px-4 py-2.5 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-red/20"}),x.year&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.year})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-slate-700 text-[10px] font-black uppercase tracking-widest px-1",children:"Tipe Background"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[{id:"image",label:"Gambar",icon:q},{id:"video",label:"Video (MP4/GIF)",icon:J}].map(s=>e.jsxs("button",{type:"button",onClick:()=>i("hero_type",s.id),className:`flex items-center justify-center gap-3 p-3 rounded-xl border-2 transition-all ${r.hero_type===s.id?"border-brand-red bg-brand-red/5 text-brand-red shadow-lg shadow-brand-red/10":"border-slate-100 bg-slate-50 text-slate-500 hover:border-slate-200"}`,children:[e.jsx(s.icon,{size:18}),e.jsx("span",{className:"font-bold text-sm",children:s.label})]},s.id))})]}),(r.hero_image||l&&l.hero_image)&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-slate-700 text-[10px] font-black uppercase tracking-widest px-1",children:"Preview"}),e.jsxs("div",{className:"relative w-full aspect-video rounded-2xl overflow-hidden border border-slate-200 shadow-inner bg-slate-50",children:[r.hero_image?r.hero_type==="video"?e.jsx("video",{src:URL.createObjectURL(r.hero_image),className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0}):e.jsx("img",{src:URL.createObjectURL(r.hero_image),className:"w-full h-full object-cover",alt:"Preview"}):l.hero_image&&(l.hero_type==="video"?e.jsx("video",{src:l.hero_image,className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0}):e.jsx("img",{src:l.hero_image,className:"w-full h-full object-cover",alt:"Existing"})),e.jsx("div",{className:"absolute top-3 left-3 px-3 py-1 bg-brand-red/90 text-white text-[9px] font-black uppercase tracking-widest rounded-full shadow-md",children:r.hero_image?"Baru":"Aktif Saat Ini"}),r.hero_image&&r.hero_type==="image"&&e.jsx("button",{type:"button",onClick:()=>b(!0),className:"absolute top-3 right-3 p-2 bg-brand-red text-white rounded-xl shadow-xl hover:bg-brand-red/90 transition-all hover:scale-110 active:scale-95 group/crop",title:"Potong Gambar",children:e.jsx($,{size:14,className:"group-hover/crop:rotate-12 transition-transform"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-slate-700 text-[10px] font-black uppercase tracking-widest px-1",children:"Unggah File Baru"}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"file",onChange:s=>{const t=s.target.files[0];if(t)if(i("hero_image",t),r.hero_type==="image"){const g=new FileReader;g.onload=()=>{y(g.result)},g.readAsDataURL(t)}else y(null)},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",accept:r.hero_type==="video"?"video/mp4":"image/*"}),e.jsxs("div",{className:"border-2 border-dashed border-slate-200 group-hover:border-brand-red/50 rounded-3xl p-8 flex flex-col items-center justify-center gap-3 transition-all bg-slate-50 group-hover:bg-brand-red/5",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white flex items-center justify-center text-slate-400 group-hover:text-brand-red transition-all shadow-sm",children:e.jsx(V,{size:24})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-slate-900 font-bold text-sm",children:"Pilih file atau tarik kesini"}),e.jsx("p",{className:"text-slate-500 text-[10px]",children:"MP4, JPG, PNG, atau GIF (Maks. 20MB)"})]})]})]}),x.hero_image&&e.jsx("p",{className:"text-brand-red text-[10px] font-bold mt-2 px-1",children:x.hero_image})]}),r.hero_type==="image"&&U&&w&&e.jsx(G,{image:w,aspectRatio:20/9,onCropComplete:s=>{i("hero_image",s),b(!1)},onCancel:()=>{b(!1)}})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted/30 rounded-xl",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:r.is_active,onChange:s=>i("is_active",s.target.checked),className:"w-5 h-5 text-brand-red rounded border-border focus:ring-brand-red/20"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-bold text-foreground cursor-pointer select-none",children:"Aktifkan Periode Publik"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 px-4 py-3 bg-muted hover:bg-muted/80 rounded-xl font-bold transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:k,className:"flex-1 px-4 py-3 bg-brand-red hover:bg-brand-red/90 text-white rounded-xl font-bold shadow-lg shadow-brand-red/20 transition-all disabled:opacity-50",children:k?"Menyimpan...":"Simpan Perubahan"})]})]})]})}),I&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-xs w-full shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex items-center gap-3 text-red-600 mb-3",children:[e.jsx("div",{className:"p-1.5 bg-red-50 rounded-lg",children:e.jsx(j,{size:20})}),e.jsx("h3",{className:"text-lg font-bold",children:"Hapus Periode?"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-6 leading-relaxed",children:["Apakah Anda yakin ingin menghapus periode ",e.jsx("strong",{children:n==null?void 0:n.year}),"? Aksi ini akan menghapus semua data divisi dan anggota terkait secara permanen."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 bg-muted hover:bg-muted/80 rounded-xl font-bold text-sm transition-colors",children:"Batal"}),e.jsx("button",{onClick:E,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-xl font-bold text-sm transition-colors shadow-lg shadow-red-100",children:"Hapus"})]})]})}),M&&a&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-100 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl border border-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-brand-red/10 rounded-2xl shadow-sm",children:e.jsx(f,{size:24,className:"text-brand-red"})}),e.jsx("h3",{className:"text-2xl font-black text-foreground",children:"Detail Periode"})]}),e.jsx("button",{onClick:()=>u(!1),className:"text-muted-foreground hover:text-foreground",children:e.jsx(z,{size:24})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-muted-foreground uppercase tracking-[0.2em] mb-2",children:"Tahun Periode"}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:a.year})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-black text-muted-foreground uppercase tracking-[0.2em] mb-4",children:["Hero Background (",a.hero_type,")"]}),a.hero_image?e.jsx("div",{className:"relative w-full aspect-video rounded-2xl overflow-hidden border border-border/50 shadow-inner bg-muted/30",children:a.hero_type==="video"?e.jsx("video",{src:a.hero_image,className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0}):e.jsx("img",{src:a.hero_image,className:"w-full h-full object-cover",alt:"Hero"})}):e.jsx("div",{className:"h-40 rounded-2xl bg-muted/50 border-2 border-dashed border-border flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground font-bold italic opacity-50",children:"Kosong"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-muted/30 rounded-2xl",children:[e.jsx("label",{className:"block text-[10px] font-black text-muted-foreground uppercase tracking-wider mb-1",children:"Status"}),e.jsx("p",{className:`text-sm font-black uppercase tracking-widest ${a.is_active?"text-emerald-600":"text-brand-red"}`,children:a.is_active?"Aktif":"Arsip"})]}),e.jsxs("div",{className:"p-4 bg-muted/30 rounded-2xl",children:[e.jsx("label",{className:"block text-[10px] font-black text-muted-foreground uppercase tracking-wider mb-1",children:"Dibuat"}),e.jsx("p",{className:"text-sm font-bold",children:new Date(a.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})})]})]}),e.jsx("button",{onClick:()=>u(!1),className:"w-full px-4 py-4 bg-brand-red hover:bg-brand-red/90 text-white rounded-2xl font-black uppercase tracking-widest shadow-lg shadow-brand-red/20 transition-all",children:"Tutup"})]})]})})]})}X.layout=c=>e.jsx(L,{children:c});export{X as default};
